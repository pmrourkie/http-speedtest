<html>

<head>
    <link rel="stylesheet" type="text/css" href="./speed.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css"> 
<title>HTTP/JS Speedtest</title>
</head>


<body>
    <div id="jswarning" data-bind="visible: !st">You need to use a browser that supports Javascript and AJAX.</div>
    <div id="mainbod" style="display:none;" data-bind="visible: st"><div>


    <section id="title">
        <div class="page-header">
            <h1>HTTP JS speed tester</h1>
            <small><script language="Javascript" src="http://www.ip2phrase.com/ip2phrase.asp?template=Your IP  is <IP> and you are connecting from <CITY> via <ISP>."></script> 

        </div>
    </section>

    <section> 
            <p>This is a really simple HTTP speed test that uses Javascript to download & upload files at certain sizes to test the speed of a connection over HTTP between your browser and my server. If you're connecting off an ultra fast connection you may see lower measurements that what you can actually achieve, this is due to the bandwidth of my server.</p>

    </section>

    <section>
        <button data-bind="click: function() { st.downtests($root.conf.downloadStartSize(), Date.now()); }" >Download</button>
        <button data-bind="click: function() { st.uptests($root.conf.uploadStartSize(), Date.now()) ; }">Upload</button>
<!--          <button data-bind="click: function() { st.downtests($root.conf.downloadStartSize(), Date.now(), {upload: $root.conf.uploadStartSize()}); }">Both</button>
 -->        <button data-bind="click: $root.stop.bind($root.stop, true)">Stop</button>
        <button data-bind="click: $root.allresults.bind($root.allresults, [])">Clear results</button>
  

        <script type="text/html" id="tpl-test-results">
            <div>
                

                <div data-bind="if: down.results.length" class="results-details">
                    <div class="download">
                        <h4>Download:</h4>

                        <div class="stat_download_mean" data-bind="visible: down.stats.mean">
                            Average speed: <span data-bind="text: down.stats.mean.last.speed.byterate"></span>
                        </div>
                        
                        <div class="stat_download_slowest" data-bind="visible: down.stats.slow">
                            Slowest speed: <span data-bind="text: down.stats.slow.last.friendlySize"></span> at <span data-bind="text: down.stats.slow.last.speed.byterate"></span>
                        </div>
                        <div class="stat_download_fastest" data-bind="visible: down.stats.fast">
                            Fastest speed: <span data-bind="text: down.stats.fast.last.friendlySize"></span> at <span data-bind="text: down.stats.fast.last.speed.byterate"></span>
                        </div>
                        

                    </div>

                    <ul data-bind="template: { name: 'tpl-test-results-items', foreach: down.results} "></ul>
                </div>


                <div data-bind="if: up.results.length" class="results-details">
                    <div class="upload">
                        <h4>Upload:</h4>

                       

                        <div class="stat_upload_mean" data-bind="visible: up.stats.mean">
                            Average speed: <span data-bind="text: up.stats.mean.last.speed.byterate"></span>
                        </div>
                        
                        <div class="stat_upload_slowest" data-bind="visible: up.stats.slow">
                            Slowest: <span data-bind="text: up.stats.slow.last.friendlySize"></span> at <span data-bind="text: up.stats.slow.last.speed.byterate"></span>
                        </div>
                        <div class="stat_upload_fastest" data-bind="visible: up.stats.fast">
                            Fastest: <span data-bind="text: up.stats.fast.last.friendlySize"></span> at <span data-bind="text: up.stats.fast.last.speed.byterate"></span>
                        </div>
                    </div>
                    <ul data-bind="template: { name: 'tpl-test-results-items', foreach: up.results} "></ul>
                </div>
            </div>


        </script>


        <script type="text/html" id="tpl-test-results-items">
            <li><span data-bind="text: last.friendlySize"></span> in <span data-bind="text: last.runningTime"></span>ms (<span data-bind="text: last.speed.byterate"></span>ps)</li>
        </script>
        
        <div id="current" data-bind="if: currenttest">
            <div class="progress"></div>
            <div class="result" data-bind="template: {name: 'tpl-test-results', foreach: [currenttest]}"></div>
        </div>
        
        <div style="margin:0px auto;">
            <div id="result" class="result" style="float:left; width: 500px; min-height: 400px; border-right: 1px solid black;">
               <div data-bind="template: {name: 'tpl-test-results', foreach: allresults}"></div>
            </div>
            <div id="stats" style="padding: 0px 10px; float:left; text-align:left;border-right: 1px solid black; display: none;">
                <div id="download">
                    <h3>Download</h3>
                    <div id="stat_download_slowest">Slowest: <span></span></div>
                    <div id="stat_download_fastest">Fastest: <span></span></div>
                    <div id="stat_download_average">Average: <span></span></div>
                </div>
                <div  id="upload">
                    <h3>Upload</h3>
                    <div id="stat_upload_slowest">Slowest: <span></span></div>
                    <div id="stat_upload_fastest">Fastest: <span></span></div>
                    <div id="stat_upload_average">Average: <span></span></div>
                </div>
            </div>
          
            <div style="clear:both;"> </div>
             <p>Created by <a href="http://www.twitter.com/pmrourkie">@pmrourkie</a> and under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a></p>
        </div>
    <div>

    <script type="application/javascript" src="./jquery.js" ></script>
    <script type="application/javascript" src="./jquery.ajax-progress.js" ></script>
    <script type="application/javascript" src="./knockout-min.js"></script>
    <script type="application/javascript" src="./knockout.mapping-latest.js"></script>
    <script type="application/javascript" src="./speed.js"></script>
</body>
</html>
